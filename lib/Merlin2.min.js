/* ============================================================================

 >4SESz.,     _,     ,gSEE2zx.,_        .azx                    ,w.
@Sh. "QEE3.  JEE3.  &ss  `*4EEEEE2x.,_  "EEV  ,aS5^;dEEEE2x.,   VEEF  _
\E2`_,gF4EEEx.?jF   EE5L       `*4EEEEE2zpn..ZEEF ;sz.  `*EEESzw.w* '|EE.
  ,dEEF   `"?j]  _,_   ,_  _,     _,.     L.EEEF  !EEF  _,,  `"``    EE7   ,,_
 :EEE7 ,ws,`|EEL`JEEL`JEE)`JEEL zE5` E3. / [EE3  ,w.  zE2` Ek .zE5^JZE3.,6EF [3
 {EEE. VEE7.EE2  AE3. EEV  ZEEL{EEL ws. ;  [EE1  EEEt{E3. JEELEE3. JE5LJEEF ,w,
  \EEk,,>^ JEEL,@EEF ZE5L,ZE5^ "Q3. V2`.    \EEk,,J' "Q[ yE2^ VE[_zEE[,"QEL V5F
          ,ss  :EE7 ;EEF               L,szzw..            ,.,            ``
          \E5.,E5F  EE1.              /; ``*4EEEZhw._      EEEL
            ````     ``              JEEE.     `"45EEEhw.,,,]

From 2010 till âˆž
typecode-js v 0.1
*/define(["jquery","NIseed"],function(e){var t=this,n=t.NI;n.co.Merlin={PREVIOUS_STEP:"prev",NEXT_STEP:"next",CURRENT_STEP:"current",DISABLED_CLASS:"state-disabled"};var r=function(t){var i=this,s,o,u,a;s=e.extend({name:null,$e:null,selector:"",steps:{},data:{},controls:{prev:null,next:null},transition:null,first_step:null},t);o={name:"mod.Merlin"+(s.name?" "+s.name:""),$e:s.$e?s.$e:e(s.selector),steps:s.steps,data:s.data,controls:s.controls,last_step:null,current_step:null,n_step_renders:0};u={init:function(){u.init_controls();u.init_steps();u.show_first_step()},init_controls:function(){e.each(o.controls,function(t,n){if(!n)return!0;if(a[t]){if(typeof n=="string"){n=e(n);o.controls[t]=n}n.on("click.Merlin",a[t])}})},init_steps:function(){e.each(o.steps,function(e,t){t.name=e;t.n_times_shown=0;if(!t.$e){if(!t.selector)return!0;t.$e=o.$e.find(t.selector)}t.$e.hide()})},show_first_step:function(){s.first_step&&this.show_step(s.first_step)},show_step:function(t){if(typeof t!="string"&&!e.isFunction(t))return!1;if(o.current_step&&o.current_step.valid===!1)return!1;e.isFunction(t)&&(t=t(i));if(t===n.co.Merlin.PREVIOUS_STEP){o.current_step&&o.current_step.prev&&u.show_step(o.current_step.prev);return}if(t===n.co.Merlin.NEXT_STEP){o.current_step&&o.current_step.next&&u.show_step(o.current_step.next);return}if(t===n.co.Merlin.CURRENT_STEP){o.current_step&&u.show_step(o.current_step.name);return}if(!o.steps[t])return!1;if(o.current_step){if(t===o.current_step.name){e.isFunction(o.current_step.visible)&&o.current_step.visible.apply(o.current_step,[i]);return!0}if(e.isFunction(o.current_step.finish)&&o.current_step.finish.apply(o.current_step,[i])===!1)return!1;o.last_step=o.current_step}o.current_step=o.steps[t];u.transition_steps();o.current_step.n_times_shown===0&&e.isFunction(o.current_step.init)&&o.current_step.init.apply(o.current_step,[i]);u.update_controls();if(e.isFunction(o.current_step.visible)){o.n_step_renders+=1;o.current_step.visible.apply(o.current_step,[i])}o.current_step.n_times_shown+=1},prev:function(){this.show_step(n.co.Merlin.PREVIOUS_STEP)},next:function(){this.show_step(n.co.Merlin.NEXT_STEP)},transition_steps:function(){var t=o.last_step,n=o.current_step;e.isFunction(s.transition)?s.transition.apply(i,[t,n]):r.default_step_transition(t,n)},get_current_step:function(){return o.current_step?o.current_step:!1},update_controls:function(){var e=o.current_step;o.controls.prev&&(e.prev?o.controls.prev.removeClass(n.co.Merlin.DISABLED_CLASS):o.controls.prev.addClass(n.co.Merlin.DISABLED_CLASS));o.controls.next&&(e.next?o.controls.next.removeClass(n.co.Merlin.DISABLED_CLASS):o.controls.next.addClass(n.co.Merlin.DISABLED_CLASS))},set_data:function(t){var n;if(!t||typeof t!="object")return;n=o.data;e.each(t,function(e,t){n[e]=t})},get_data:function(){var t={};e.each(o.data,function(e,n){t[e]=n});return t},set_val:function(e,t){o.data[e]=t},get_val:function(e){return o.data[e]},destroy:function(){e.each(o.controls,function(t,n){if(a[t]){typeof n=="string"&&(n=e(n));n.off("click.Merlin",a[t])}});e.each(o.steps,function(){e.isFunction(this.destroy)&&this.destroy.apply(this,[i])})}};a={prev:function(t){t.preventDefault();if(e(this).hasClass(n.co.Merlin.DISABLED_CLASS))return;u.show_step(n.co.Merlin.PREVIOUS_STEP)},next:function(t){t.preventDefault();if(e(this).hasClass(n.co.Merlin.DISABLED_CLASS))return;u.show_step(n.co.Merlin.NEXT_STEP)},refresh:function(e){e.preventDefault();u.show_step(n.co.Merlin.CURRENT_STEP)}};this.show_first_step=u.show_first_step;this.show_step=u.show_step;this.prev=u.prev;this.next=u.next;this.get_current_step=u.get_current_step;this.set_data=u.set_data;this.get_data=u.get_data;this.set_val=u.set_val;this.get_val=u.get_val;this.destroy=u.destroy;u.init();console.log(o)};r.default_step_transition=function(e,t){e&&e.$e.hide();t.$e.show()};n.Merlin=r;return r});